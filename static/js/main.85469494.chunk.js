(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{108:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var r,c,a,i,s,o,d,u,l,j,b,p,h,O,m,x,f,g,v,w,y=n(3),S=n(0),k=n.n(S),N=n(22),C=n.n(N),I=(n(108),n(21)),A=n(16),_=n(24),P=n(12),E=n(13),U=n(11),D=n.n(U),q=n(19),z=n(9),F=n(23),Q=n.n(F),L="https://shop-api-4i7l.onrender.com/api",T=function(){return{headers:{"x-auth-token":localStorage.getItem("token")}}},R={cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],cartTotalQuantity:0,cartTotalAmount:0},V=(Object(z.c)("order/checkOutCart",function(){var e=Object(q.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.post("".concat(L,"/order"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),_.b.error(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),Object(z.d)({name:"cart",initialState:R,reducers:{addToCart:function(e,t){var n=e.cartItems.findIndex((function(e){return e._id===t.payload._id}));if(n>=0)e.cartItems[n]=Object(E.a)(Object(E.a)({},e.cartItems[n]),{},{cartQuantity:e.cartItems[n].cartQuantity+1}),_.b.info("quantit\xe9 ajout\xe9",{position:"bottom-left"});else{var r=Object(E.a)(Object(E.a)({},t.payload),{},{cartQuantity:1});e.cartItems.push(r),_.b.success("Produit ajout\xe9 au panier",{position:"bottom-left"})}localStorage.setItem("cartItems",JSON.stringify(e.cartItems))},decreaseCart:function(e,t){var n=e.cartItems.findIndex((function(e){return e._id===t.payload._id}));if(e.cartItems[n].cartQuantity>1)e.cartItems[n].cartQuantity-=1,_.b.info("Quantit\xe9 diminu\xe9",{position:"bottom-left"});else if(1===e.cartItems[n].cartQuantity){var r=e.cartItems.filter((function(e){return e._id!==t.payload._id}));e.cartItems=r,_.b.error("Produit enlev\xe9 du panier",{position:"bottom-left"})}localStorage.setItem("cartItems",JSON.stringify(e.cartItems))},removeFromCart:function(e,t){e.cartItems.map((function(n){if(n._id===t.payload._id){var r=e.cartItems.filter((function(e){return e._id!==n._id}));e.cartItems=r,_.b.error("Produit enlev\xe9 du panier",{position:"bottom-left"})}return localStorage.setItem("cartItems",JSON.stringify(e.cartItems)),e}))},getTotals:function(e,t){var n=e.cartItems.reduce((function(e,t){var n=t.price,r=t.cartQuantity,c=n*r;return e.total+=c,e.quantity+=r,e}),{total:0,quantity:0}),r=n.total,c=n.quantity;r=parseFloat(r.toFixed(2)),e.cartTotalQuantity=c,e.cartTotalAmount=r},clearCart:function(e,t){e.cartItems=[],localStorage.setItem("cartItems",JSON.stringify(e.cartItems)),_.b.error("Panier vid\xe9",{position:"bottom-left"})}}})),H=V.actions,J=H.addToCart,M=H.decreaseCart,B=H.removeFromCart,$=H.getTotals,W=H.clearCart,G=V.reducer,X=n(1),K=function(){var e=Object(P.e)((function(e){return e.products})),t=e.items,n=e.status,r=Object(P.e)((function(e){return e.cart})),c=Object(P.d)();Object(S.useEffect)((function(){c($())}),[r,c]);return Object(X.jsx)("div",{className:"home-container",children:"success"===n?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("h2",{children:"Ajouts r\xe9cent"}),Object(X.jsx)("div",{className:"products",children:t&&(null===t||void 0===t?void 0:t.map((function(e){return Object(X.jsxs)("div",{className:"product",children:[Object(X.jsx)("h3",{children:e.name}),Object(X.jsx)("img",{src:e.image,alt:e.name}),Object(X.jsxs)("div",{className:"details",children:[Object(X.jsx)("span",{children:e.desc}),Object(X.jsxs)("span",{className:"price",children:["$",e.price]})]}),Object(X.jsx)("button",{onClick:function(){return function(e){c(J(e))}(e)},children:"Add To Cart"})]},e._id)})))})]}):"pending"===n?Object(X.jsx)("p",{children:"Chargement ..."}):Object(X.jsx)("p",{children:"Une erreur est survenue..."})})},Y=n(10),Z=n(18),ee=n(42),te={token:localStorage.getItem("token"),name:"",email:"",_id:"",isAdmin:"",registerStatus:"",registerError:"",loginStatus:"",loginError:"",userLoaded:!1},ne=Object(z.c)("auth/registerUser",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Q.a.post("".concat(L,"/register"),{name:t.name,email:t.email,password:t.password});case 4:return c=e.sent,localStorage.setItem("token",c.data),e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0.response.data),e.abrupt("return",r(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),re=Object(z.c)("auth/loginUser",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Q.a.post("".concat(L,"/login"),{email:t.email,password:t.password});case 4:return c=e.sent,localStorage.setItem("token",c.data),e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),e.abrupt("return",r(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ce=Object(z.c)("auth/getUser",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Q.a.get("".concat(L,"/user/").concat(t),T());case 4:return c=e.sent,localStorage.setItem("token",c.data),e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),e.abrupt("return",r(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ae=Object(z.d)({name:"auth",initialState:te,reducers:{loadUser:function(e,t){var n=e.token;if(n){var r=Object(ee.a)(n);return Object(E.a)(Object(E.a)({},e),{},{token:n,name:r.name,email:r.email,_id:r._id,isAdmin:r.isAdmin,userLoaded:!0})}return Object(E.a)(Object(E.a)({},e),{},{userLoaded:!0})},logoutUser:function(e,t){return localStorage.removeItem("token"),Object(E.a)(Object(E.a)({},e),{},{token:"",name:"",email:"",_id:"",isAdmin:"",registerStatus:"",registerError:"",loginStatus:"",loginError:""})}},extraReducers:function(e){e.addCase(ne.pending,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{registerStatus:"pending"})})),e.addCase(ne.fulfilled,(function(e,t){if(t.payload){var n=Object(ee.a)(t.payload);return Object(E.a)(Object(E.a)({},e),{},{token:t.payload,name:n.name,email:n.email,_id:n._id,isAdmin:n.isAdmin,registerStatus:"success"})}return e})),e.addCase(ne.rejected,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{registerStatus:"rejected",registerError:t.payload})})),e.addCase(re.pending,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{loginStatus:"pending"})})),e.addCase(re.fulfilled,(function(e,t){if(t.payload){var n=Object(ee.a)(t.payload);return Object(E.a)(Object(E.a)({},e),{},{token:t.payload,name:n.name,email:n.email,_id:n._id,isAdmin:n.isAdmin,loginStatus:"success"})}return e})),e.addCase(re.rejected,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{loginStatus:"rejected",loginError:t.payload})})),e.addCase(ce.pending,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{getUserStatus:"pending"})})),e.addCase(ce.fulfilled,(function(e,t){if(t.payload){var n=Object(ee.a)(t.payload);return Object(E.a)(Object(E.a)({},e),{},{token:t.payload,name:n.name,email:n.email,_id:n._id,isAdmin:n.isAdmin,getUserStatus:"success"})}return e})),e.addCase(ce.rejected,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{getUserStatus:"rejected",getUserError:t.payload})}))}}),ie=ae.actions,se=ie.loadUser,oe=ie.logoutUser,de=ae.reducer,ue=function(){var e=Object(P.d)(),t=Object(P.e)((function(e){return e.cart})).cartTotalQuantity,n=Object(P.e)((function(e){return e.auth}));return Object(X.jsxs)("nav",{className:"nav-bar",children:[Object(X.jsx)(I.b,{to:"/",children:Object(X.jsx)("h2",{children:"E-Commerce"})}),Object(X.jsx)(I.b,{to:"/cart",children:Object(X.jsxs)("div",{className:"nav-bag",children:[Object(X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-handbag-fill",viewBox:"0 0 16 16",children:Object(X.jsx)("path",{d:"M8 1a2 2 0 0 0-2 2v2H5V3a3 3 0 1 1 6 0v2h-1V3a2 2 0 0 0-2-2zM5 5H3.36a1.5 1.5 0 0 0-1.483 1.277L.85 13.13A2.5 2.5 0 0 0 3.322 16h9.355a2.5 2.5 0 0 0 2.473-2.87l-1.028-6.853A1.5 1.5 0 0 0 12.64 5H11v1.5a.5.5 0 0 1-1 0V5H6v1.5a.5.5 0 0 1-1 0V5z"})}),Object(X.jsx)("span",{className:"bag-quantity",children:Object(X.jsx)("span",{children:t})})]})}),n._id?Object(X.jsxs)(je,{children:[n.isAdmin?Object(X.jsx)("div",{children:Object(X.jsx)(I.b,{to:"/admin/summary",children:"Admin"})}):null,Object(X.jsx)("div",{onClick:function(){e(oe(null)),_.b.warning("Logged out!",{position:"bottom-left"})},children:"Deconnexion"})]}):Object(X.jsxs)(le,{children:[Object(X.jsx)(I.b,{to:"/login",children:"Connexion"}),Object(X.jsx)(I.b,{to:"register",children:"Cr\xe9er un compte"})]})]})},le=Z.a.div(r||(r=Object(Y.a)(["\n  a {\n    &:last-child {\n      margin-left: 2rem;\n    }\n  }\n"]))),je=Z.a.div(c||(c=Object(Y.a)(["\n  color: white;\n  display: flex;\n\n  div {\n    cursor: pointer;\n\n    &:last-child {\n      margin-left: 2rem;\n    }\n  }\n"]))),be=function(){return Object(X.jsxs)("div",{className:"not-found",children:[Object(X.jsx)("h2",{children:"404"}),Object(X.jsx)("p",{children:"Page not found"})]})},pe=function(e){var t=e.cartItems,n=(e.subtotal,Object(P.e)((function(e){return e.auth})));return Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("button",{onClick:function(){Q.a.post("".concat(L,"/stripe/create-checkout-session"),{cartItems:t,userId:n._id}).then((function(e){e.data.url&&(window.location.href=e.data.url)})).catch((function(e){return console.log(e.message)}))},children:"Payer"})})},he=function(){var e=Object(P.e)((function(e){return e.cart})),t=Object(P.e)((function(e){return e.auth})),n=Object(P.d)(),r=Object(A.g)();Object(S.useEffect)((function(){n($()),console.log("cart: ",e)}),[e,n]);return Object(X.jsxs)("div",{className:"cart-container",children:[Object(X.jsx)("h2",{children:"PANIER"}),0===e.cartItems.length?Object(X.jsxs)("div",{className:"cart-empty",children:[Object(X.jsx)("p",{children:"Panier vide pour le moment"}),Object(X.jsx)("div",{className:"start-shopping",children:Object(X.jsxs)(I.b,{to:"/",children:[Object(X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(X.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})}),Object(X.jsx)("span",{children:"Commencer votre shopping"})]})})]}):Object(X.jsxs)("div",{children:[Object(X.jsxs)("div",{className:"titles",children:[Object(X.jsx)("h3",{className:"product-title",children:"Produit"}),Object(X.jsx)("h3",{className:"price",children:"Prix"}),Object(X.jsx)("h3",{className:"quantity",children:"Quantit\xe9"}),Object(X.jsx)("h3",{className:"total",children:"Total"})]}),Object(X.jsx)("div",{className:"cart-items",children:e.cartItems&&e.cartItems.map((function(e){return Object(X.jsxs)("div",{className:"cart-item",children:[Object(X.jsxs)("div",{className:"cart-product",children:[Object(X.jsx)("img",{src:e.image,alt:e.name}),Object(X.jsxs)("div",{children:[Object(X.jsx)("h3",{children:e.name}),Object(X.jsx)("p",{children:e.desc}),Object(X.jsx)("button",{onClick:function(){n(B(e))},children:"Supprimer"})]})]}),Object(X.jsxs)("div",{className:"cart-product-price",children:["$",e.price]}),Object(X.jsxs)("div",{className:"cart-product-quantity",children:[Object(X.jsx)("button",{onClick:function(){n(M(e))},children:"-"}),Object(X.jsx)("div",{className:"count",children:e.cartQuantity}),Object(X.jsx)("button",{onClick:function(){n(J(e))},children:"+"})]}),Object(X.jsxs)("div",{className:"cart-product-total-price",children:["$",e.price*e.cartQuantity]})]},e._id)}))}),Object(X.jsxs)("div",{className:"cart-summary",children:[Object(X.jsx)("button",{className:"clear-btn",onClick:function(){n(W())},children:"Vider le panier"}),Object(X.jsxs)("div",{className:"cart-checkout",children:[Object(X.jsxs)("div",{className:"subtotal",children:[Object(X.jsx)("span",{children:"Sous-total"}),Object(X.jsxs)("span",{className:"amount",children:["$",e.cartTotalAmount]})]}),Object(X.jsx)("p",{children:"Frais de port calcul\xe9 au paiement"}),t._id?Object(X.jsx)(pe,{cartItems:e.cartItems,subtotal:e.cartTotalAmount}):Object(X.jsx)("button",{className:"cart-login",onClick:function(){return r("/login")},children:"Se connecter pour payer"}),Object(X.jsx)("div",{className:"continue-shopping",children:Object(X.jsxs)(I.b,{to:"/",children:[Object(X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(X.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})}),Object(X.jsx)("span",{children:"Continuer votre Shopping"})]})})]})]})]})]})},Oe=n(43),me=function(){return Object(P.e)((function(e){return e.auth})).isAdmin?Object(X.jsxs)(xe,{children:[Object(X.jsxs)(fe,{children:[Object(X.jsx)("h3",{children:"Dashboard"}),Object(X.jsxs)(I.c,{className:function(e){return e.isActive?"link-active":"link-inactive"},to:"/admin/summary",children:[Object(X.jsx)(Oe.c,{})," R\xe9sum\xe9"]}),Object(X.jsxs)(I.c,{className:function(e){return e.isActive?"link-active":"link-inactive"},to:"/admin/products",children:[Object(X.jsx)(Oe.b,{})," Produits"]}),Object(X.jsxs)(I.c,{className:function(e){return e.isActive?"link-active":"link-inactive"},to:"/admin/orders",children:[Object(X.jsx)(Oe.a,{})," Commandes"]}),Object(X.jsxs)(I.c,{className:function(e){return e.isActive?"link-active":"link-inactive"},to:"/admin/users",children:[Object(X.jsx)(Oe.d,{})," Utilisateurs"]})]}),Object(X.jsx)(ge,{children:Object(X.jsx)(A.a,{})})]}):Object(X.jsx)("p",{children:"Acc\xe8s non autoris\xe9. Vous n'\xeates pas Admin!"})},xe=Z.a.div(a||(a=Object(Y.a)(["\n  display: flex;\n  height: 100vh;\n"]))),fe=Z.a.div(i||(i=Object(Y.a)(["\n  border-right: 1px solid gray;\n  height: calc(100vh - 70px);\n  position: fixed;\n  overflow-y: auto;\n  width: 200px;\n  display: flex;\n  flex-direction: column;\n  padding: 2rem;\n  h3 {\n    margin: 0 0 1rem 0;\n    padding: 0;\n    text-transform: uppercase;\n    font-size: 17px;\n  }\n  a {\n    text-decoration: none;\n    margin-bottom: 1rem;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    font-weight: 700;\n  }\n  svg {\n    margin-right: 0.5rem;\n    font-size: 18px;\n  }\n"]))),ge=Z.a.div(s||(s=Object(Y.a)(["\n  margin-left: 200px;\n  padding: 2rem 3rem;\n  width: 100%;\n"]))),ve=Z.a.div(o||(o=Object(Y.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),we=Z.a.button(d||(d=Object(Y.a)(["\n  padding: 9px 12px;\n  border-radius: 5px;\n  font-weight: 400;\n  letter-spacing: 1.15px;\n  background-color: #4b70e2;\n  color: #f9f9f9;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  margin: 0.5rem 0;\n"]))),ye=function(){var e=Object(A.g)();return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)(ve,{children:["Produits",Object(X.jsx)(we,{onClick:function(){return e("/admin/products/create-product")},children:"Ajouter"})]}),Object(X.jsx)(A.a,{})]})},Se=function(){return Object(X.jsx)("h2",{children:"Summary"})},ke=n(6),Ne=Object(z.c)("products/productsFetch",Object(q.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("".concat(L,"/products"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),Ce=Object(z.c)("products/productsCreate",function(){var e=Object(q.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.post("".concat(L,"/products"),t,T());case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),_.b.error(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),Ie=Object(z.c)("products/productDelete",function(){var e=Object(q.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("".concat(L,"/products/").concat(t)),e.next=4,Q.a.delete("".concat(L,"/products/").concat(t),T());case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),_.b.error(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),Ae=Object(z.d)({name:"products",initialState:{items:[],status:null,createStatus:null,deleteStatus:null},reducers:{},extraReducers:(u={},Object(y.a)(u,Ne.pending,(function(e,t){e.status="pending"})),Object(y.a)(u,Ne.fulfilled,(function(e,t){e.items=t.payload,e.status="success"})),Object(y.a)(u,Ne.rejected,(function(e,t){e.status="rejected"})),Object(y.a)(u,Ce.pending,(function(e,t){e.createStatus="pending"})),Object(y.a)(u,Ce.fulfilled,(function(e,t){e.items.push(t.payload),e.createStatus="success",_.b.success("Produit ajout\xe9")})),Object(y.a)(u,Ce.rejected,(function(e,t){e.createStatus="rejected"})),Object(y.a)(u,Ie.pending,(function(e,t){e.deleteStatus="pending"})),Object(y.a)(u,Ie.fulfilled,(function(e,t){var n=e.items.filter((function(e){return e._id!==t.payload._id}));e.items=n,e.deleteStatus="success",_.b.error("Produit supprim\xe9")})),Object(y.a)(u,Ie.rejected,(function(e,t){e.deleteStatus="rejected"})),u)}).reducer,_e=function(){var e=Object(P.d)(),t=Object(A.g)(),n=Object(S.useState)(""),r=Object(ke.a)(n,2),c=r[0],a=r[1],i=Object(S.useState)(""),s=Object(ke.a)(i,2),o=s[0],d=s[1],u=Object(S.useState)(""),l=Object(ke.a)(u,2),j=l[0],b=l[1],p=Object(S.useState)(""),h=Object(ke.a)(p,2),O=h[0],m=h[1],x=Object(S.useState)(""),f=Object(ke.a)(x,2),g=f[0],v=f[1];console.log(c);var w=function(e){var t=new FileReader;e?(t.readAsDataURL(e),t.onloadend=function(){a(t.result)}):a("")};return Object(X.jsxs)(Ee,{children:[Object(X.jsxs)(Pe,{onSubmit:function(n){n.preventDefault(),e(Ce({name:o,brand:j,price:O,desc:g,image:c})),t("/admin/products")},children:[Object(X.jsx)("h3",{children:"Ajouter un nouveau produit"}),Object(X.jsx)("input",{type:"file",accept:"image/",onChange:function(e){var t=e.target.files[0];w(t)},required:!0}),Object(X.jsxs)("select",{onChange:function(e){return b(e.target.value)},required:!0,children:[Object(X.jsx)("option",{value:"",children:"Choisir la marque"}),Object(X.jsx)("option",{value:"iphone",children:"Iphone"}),Object(X.jsx)("option",{value:"samsung",children:"Samsung"}),Object(X.jsx)("option",{value:"xiaomi",children:"Xiaomi"}),Object(X.jsx)("option",{value:"other",children:"Autre marque"})]}),Object(X.jsx)("input",{type:"text",required:!0,placeholder:"nom",onChange:function(e){return d(e.target.value)}}),Object(X.jsx)("input",{type:"text",required:!0,placeholder:"Prix",onChange:function(e){return m(e.target.value)}}),Object(X.jsx)("input",{type:"text",required:!0,placeholder:"Description",onChange:function(e){return v(e.target.value)}}),Object(X.jsx)(we,{type:"submit",children:"Envoyer"})]}),Object(X.jsx)(Ue,{children:c?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("img",{src:c,alt:"le produit"})}):Object(X.jsx)("p",{children:"La preview de l'image upload\xe9e"})})]})},Pe=Z.a.form(l||(l=Object(Y.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 300px;\n  margin-top: 2rem;\n  select,\n  input {\n    padding: 7px;\n    min-height: 30px;\n    outline: none;\n    border-radius: 5px;\n    border: 1px solid rgb(182, 182, 182);\n    margin: 0.3rem 0;\n    &:focus {\n      border: 2px solid rgb(0, 208, 255);\n    }\n  }\n  select {\n    color: rgb(95, 95, 95);\n  }\n"]))),Ee=Z.a.div(j||(j=Object(Y.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),Ue=Z.a.div(b||(b=Object(Y.a)(["\n  margin: 2rem 0 2rem 2rem;\n  padding: 2rem;\n  border: 1px solid rgb(183, 183, 183);\n  max-width: 300px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  color: rgb(78, 78, 78);\n  img {\n    max-width: 100%;\n  }\n"]))),De=(n(130),Z.a.form(p||(p=Object(Y.a)(["\n  max-width: 350px;\n  width: 100%;\n  margin: 2rem auto;\n\n  h2 {\n    margin-bottom: 1rem;\n  }\n\n  button,\n  input {\n    height: 35px;\n    width: 100%;\n    padding: 7px;\n    outline: none;\n    border-radius: 5px;\n    border: 1px solid rgb(220, 220, 220);\n    margin-bottom: 1rem;\n\n    &:focus {\n      border: 1px solid rgb(0, 208, 255);\n    }\n  }\n\n  button {\n    cursor: pointer;\n\n    &:focus {\n      border: none;\n    }\n  }\n\n  p {\n    font-size: 14px;\n    color: red;\n  }\n"])))),qe=function(){var e=Object(P.d)(),t=Object(A.g)(),n=Object(P.e)((function(e){return e.auth})),r=Object(S.useState)({name:"",email:"",password:""}),c=Object(ke.a)(r,2),a=c[0],i=c[1];Object(S.useEffect)((function(){n._id&&t("/cart")}),[n._id,t]);return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)(De,{onSubmit:function(t){t.preventDefault(),console.log(a),e(ne(a))},children:[Object(X.jsx)("h2",{children:"Register"}),Object(X.jsx)("input",{type:"text",placeholder:"name",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{name:e.target.value}))}}),Object(X.jsx)("input",{type:"email",placeholder:"email",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{email:e.target.value}))}}),Object(X.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{password:e.target.value}))}}),Object(X.jsx)("button",{children:"pending"===n.rigisterStatus?"Submitting...":"Register"}),"rejected"===n.registerStatus?Object(X.jsx)("p",{children:n.registerError}):null]})})},ze=function(){var e=Object(A.g)(),t=Object(P.d)(),n=Object(P.e)((function(e){return e.auth})),r=Object(S.useState)({email:"",password:""}),c=Object(ke.a)(r,2),a=c[0],i=c[1];Object(S.useEffect)((function(){n._id&&e("/cart")}),[n._id,e]);return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)(De,{onSubmit:function(e){e.preventDefault(),console.log(a),t(re(a))},children:[Object(X.jsx)("h2",{children:"Login"}),Object(X.jsx)("input",{type:"email",placeholder:"email",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{email:e.target.value}))}}),Object(X.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{password:e.target.value}))}}),Object(X.jsx)("button",{children:"pending"===n.loginStatus?"Submitting...":"Login"}),"rejected"===n.loginStatus?Object(X.jsx)("p",{children:n.loginError}):null]})})},Fe=function(){return Object(X.jsx)("h2",{children:"Paiement r\xe9ussi"})},Qe=n(177),Le=Object(z.c)("orders/ordersFetch",Object(q.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("".concat(L,"/order"),T());case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),Te=Object(z.c)("orders/ordersEdit",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c,a,i,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,c=r(),a=c.orders.list.filter((function(e){return e._id===t.id})),i=Object(E.a)(Object(E.a)({},a[0]),{},{delivery_status:t.delivery_status}),e.prev=4,e.next=7,Q.a.put("".concat(L,"/order/").concat(t.id),i,T());case 7:return s=e.sent,e.abrupt("return",s.data);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Re=Object(z.d)({name:"orders",initialState:{list:[],status:null},reducers:{},extraReducers:(h={},Object(y.a)(h,Le.pending,(function(e,t){e.status="pending"})),Object(y.a)(h,Le.fulfilled,(function(e,t){e.list=t.payload,e.status="success"})),Object(y.a)(h,Le.rejected,(function(e,t){e.status="rejected"})),Object(y.a)(h,Te.pending,(function(e,t){e.status="pending"})),Object(y.a)(h,Te.fulfilled,(function(e,t){var n=e.list.map((function(e){return e._id===t.payload._id?t.payload:e}));e.list=n,e.status="success"})),Object(y.a)(h,Te.rejected,(function(e,t){e.status="rejected"})),h)}).reducer,Ve=n(81),He=n.n(Ve);function Je(){var e=Object(P.e)((function(e){return e.orders})).list,t=Object(P.d)(),n=Object(A.g)();console.log("list:",e),S.useEffect((function(){t(Le())}),[t]);var r=e&&e.map((function(e){var t;return{id:e._id,cName:e.shipping.name,amount:null===(t=e.total/100)||void 0===t?void 0:t.toLocaleString(),deliveryStatus:e.delivery_status,date:He()(e.createdAt).fromNow()}})),c=[{field:"id",headerName:"ID",width:220},{field:"cName",headerName:"Utilisateur",width:120},{field:"amount",headerName:"Montant(\u20ac)",width:100},{field:"deliveryStatus",headerName:"Status",width:100,renderCell:function(e){return Object(X.jsx)("div",{children:"pending"===e.row.deliveryStatus?Object(X.jsx)(Ge,{children:"A Traiter"}):"dispatched"===e.row.deliveryStatus?Object(X.jsx)(Xe,{children:"Accept\xe9"}):"delivered"===e.row.deliveryStatus?Object(X.jsx)(Ke,{children:"D\xe9livr\xe9"}):"error"})}},{field:"date",headerName:"Date",width:120},{field:"actions",headerName:"Actions",sortable:!1,width:220,renderCell:function(e){return Object(X.jsxs)(Ye,{children:[Object(X.jsx)(et,{onClick:function(){return a(e.row.id)},children:"Accepter"}),Object(X.jsx)(tt,{onClick:function(){return i(e.row.id)},children:"D\xe9livrer"}),Object(X.jsx)(Ze,{onClick:function(){return n("/order/".concat(e.row.id))},children:"Voir"})]})}}],a=function(e){t(Te({id:e,delivery_status:"dispatched"}))},i=function(e){t(Te({id:e,delivery_status:"delivered"}))};return Object(X.jsx)("div",{style:{height:400,width:"100%"},children:Object(X.jsx)(Qe.a,{rows:r,columns:c,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0})})}var Me,Be,$e,We,Ge=Z.a.div(O||(O=Object(Y.a)(["\n  color: rgb(253, 181, 40);\n  background: rgb(253, 181, 40, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),Xe=Z.a.div(m||(m=Object(Y.a)(["\n  color: rgb(38, 198, 249);\n  background: rgb(38, 198, 249, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),Ke=Z.a.div(x||(x=Object(Y.a)(["\n  color: rgb(102, 108, 255);\n  background: rgb(102, 108, 255, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),Ye=Z.a.div(f||(f=Object(Y.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  button {\n    border: none;\n    outline: none;\n    padding: 3px 5px;\n    color: white;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n"]))),Ze=Z.a.button(g||(g=Object(Y.a)(["\n  background-color: rgb(114, 225, 40);\n"]))),et=Z.a.button(v||(v=Object(Y.a)(["\n  background-color: rgb(38, 198, 249);\n"]))),tt=Z.a.button(w||(w=Object(Y.a)(["\n  background-color: rgb(102, 108, 255);\n"]))),nt=function(){return Object(X.jsx)(X.Fragment,{children:Object(X.jsx)(Je,{})})};function rt(){var e=Object(P.e)((function(e){return e.products})).items,t=Object(P.d)(),n=e&&e.map((function(e){return{id:e._id,imageUrl:e.image,pName:e.name,pDesc:e.desc,price:e.price.toLocaleString()}})),r=[{field:"id",headerName:"ID",width:220},{field:"imageUrl",headerName:"image",width:80,renderCell:function(e){return Object(X.jsx)(lt,{children:Object(X.jsx)("img",{src:e.row.imageUrl,alt:""})})}},{field:"pName",headerName:"Nom",width:130},{field:"pDesc",headerName:"Description",width:130},{field:"price",headerName:"Prix",width:80},{field:"actions",headerName:"Actions",sortable:!1,width:170,renderCell:function(e){return Object(X.jsx)(jt,{children:Object(X.jsx)(bt,{onClick:function(){return c(e.row.id)},children:"Supprimer"})})}}],c=function(e){t(Ie(e)),console.log("suppression...")};return Object(X.jsx)("div",{style:{height:400,width:"100%"},children:Object(X.jsx)(Qe.a,{rows:n,columns:r,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0})})}var ct,at,it,st,ot,dt,ut,lt=Z.a.div(Me||(Me=Object(Y.a)(["\n  img {\n    height: 40px;\n  }\n"]))),jt=Z.a.div(Be||(Be=Object(Y.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  button {\n    border: none;\n    outline: none;\n    padding: 3px 5px;\n    color: white;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n"]))),bt=Z.a.button($e||($e=Object(Y.a)(["\n  background-color: rgb(255, 77, 73);\n"]))),pt=(Z.a.button(We||(We=Object(Y.a)(["\n  background-color: rgb(114, 225, 40);\n"]))),function(){return Object(X.jsx)("h2",{children:"Users"})}),ht=function(){var e,t,n,r,c=Object(A.h)(),a=Object(S.useState)({}),i=Object(ke.a)(a,2),s=i[0],o=i[1],d=Object(S.useState)(!1),u=Object(ke.a)(d,2),l=u[0],j=u[1];return Object(S.useEffect)((function(){var e=function(){var e=Object(q.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,Q.a.get("".concat(L,"/order/findOne/").concat(c.id),T());case 4:t=e.sent,o(t.data),j(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[c.id]),Object(X.jsx)(Ot,{children:l?Object(X.jsx)("p",{children:"Chargement ..."}):Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)(mt,{children:[Object(X.jsx)("h2",{children:"Details de commande"}),Object(X.jsxs)("p",{children:["Status de la livraison:"," ","pending"===s.delivery_status?Object(X.jsx)(gt,{children:"A traiter"}):"dispatched"===s.delivery_status?Object(X.jsx)(vt,{children:"En cours"}):"delivered"===s.delivery_status?Object(X.jsx)(wt,{children:"D\xe9livr\xe9"}):"erreur"]}),Object(X.jsx)("h3",{children:"Produits command\xe9s"}),Object(X.jsx)(xt,{children:null===(e=s.products)||void 0===e?void 0:e.map((function(e,t){return Object(X.jsxs)(ft,{children:[Object(X.jsx)("span",{children:e.description}),Object(X.jsx)("span",{children:e.quantity}),Object(X.jsx)("span",{children:"\u20ac"+(e.amount_total/100).toLocaleString()})]},t)}))}),Object(X.jsxs)("div",{children:[Object(X.jsx)("h3",{children:"Prix total"}),Object(X.jsx)("p",{children:"\u20ac"+(s.total/100).toLocaleString()})]}),Object(X.jsxs)("div",{children:[Object(X.jsx)("h3",{children:"Details de livraison"}),Object(X.jsxs)("p",{children:["Client: ",null===(t=s.shipping)||void 0===t?void 0:t.name]}),Object(X.jsxs)("p",{children:["Ville: ",null===(n=s.shipping)||void 0===n?void 0:n.address.city]}),Object(X.jsxs)("p",{children:["Email: ",null===(r=s.shipping)||void 0===r?void 0:r.email]})]})]})})})},Ot=Z.a.div(ct||(ct=Object(Y.a)(["\n  margin: 3rem;\n  display: flex;\n  justify-content: center;\n  h3 {\n    margin: 1.5rem 0 0.5rem 0;\n  }\n"]))),mt=Z.a.div(at||(at=Object(Y.a)(["\n  max-width: 500px;\n  width: 100%;\n  height: auto;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  border-radius: 5px;\n  padding: 2rem;\n"]))),xt=Z.a.div(it||(it=Object(Y.a)(["\n  span {\n    margin-right: 1.5rem;\n    &:first-child {\n      font-weight: bold;\n    }\n  }\n"]))),ft=Z.a.li(st||(st=Object(Y.a)(["\n  margin-left: 0.5rem;\n  margin-bottom: 0.5rem;\n"]))),gt=Z.a.span(ot||(ot=Object(Y.a)(["\n  color: rgb(253, 181, 40);\n  background: rgb(253, 181, 40, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),vt=Z.a.span(dt||(dt=Object(Y.a)(["\n  color: rgb(38, 198, 249);\n  background: rgb(38, 198, 249, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),wt=Z.a.span(ut||(ut=Object(Y.a)(["\n  color: rgb(102, 108, 255);\n  background: rgb(102, 108, 255, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"])));var yt=function(){var e=Object(P.d)();return Object(S.useEffect)((function(){e(se(null))}),[e]),Object(X.jsx)("div",{className:"App",children:Object(X.jsxs)(I.a,{children:[Object(X.jsx)(_.a,{}),Object(X.jsx)(ue,{}),Object(X.jsx)("div",{className:"content-container",children:Object(X.jsxs)(A.d,{children:[Object(X.jsx)(A.b,{path:"/",element:Object(X.jsx)(K,{})}),Object(X.jsx)(A.b,{path:"/cart",element:Object(X.jsx)(he,{})}),Object(X.jsx)(A.b,{path:"/checkout-success",element:Object(X.jsx)(Fe,{})}),Object(X.jsx)(A.b,{path:"/register",element:Object(X.jsx)(qe,{})}),Object(X.jsx)(A.b,{path:"/login",element:Object(X.jsx)(ze,{})}),Object(X.jsx)(A.b,{path:"/order/:id",element:Object(X.jsx)(ht,{})}),Object(X.jsxs)(A.b,{path:"/admin",element:Object(X.jsx)(me,{}),children:[Object(X.jsxs)(A.b,{path:"products",element:Object(X.jsx)(ye,{}),children:[Object(X.jsx)(A.b,{index:!0,element:Object(X.jsx)(rt,{})}),Object(X.jsx)(A.b,{path:"create-product",element:Object(X.jsx)(_e,{})})]}),Object(X.jsx)(A.b,{path:"summary",element:Object(X.jsx)(Se,{})}),Object(X.jsx)(A.b,{path:"orders",element:Object(X.jsx)(nt,{})}),Object(X.jsx)(A.b,{path:"users",element:Object(X.jsx)(pt,{})})]}),Object(X.jsx)(A.b,{path:"*",element:Object(X.jsx)(be,{})})]})})]})})},St=n(82),kt=n(28),Nt=Object(St.a)({reducerPath:"productsApi",baseQuery:Object(kt.d)({baseUrl:"https://shop-api-4i7l.onrender.com/"}),endpoints:function(e){return{getAllProducts:e.query({query:function(){return"products"}})}}}),Ct=(Nt.useGetAllProductsQuery,Object(z.a)({reducer:Object(y.a)({products:Ae,orders:Re,cart:G,auth:de},Nt.reducerPath,Nt.reducer),middleware:function(e){return e().concat(Nt.middleware)}}));Ct.dispatch(Ne()),Ct.dispatch($()),Ct.dispatch(se(null)),C.a.render(Object(X.jsx)(k.a.StrictMode,{children:Object(X.jsx)(P.a,{store:Ct,children:Object(X.jsx)(yt,{})})}),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.85469494.chunk.js.map