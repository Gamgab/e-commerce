(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{108:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var r,c,a,i,s,o,d,l,u,j,b,p,h,O,m,x,f,g,v,w,y=n(3),S=n(0),N=n.n(S),k=n(22),C=n.n(k),I=(n(108),n(21)),A=n(16),_=n(24),P=n(12),E=n(13),U=n(11),D=n.n(U),q=n(19),z=n(9),L=n(23),Q=n.n(L),F="https://web-production-c3be.up.railway.app/api",R=function(){return{headers:{"x-auth-token":localStorage.getItem("token")}}},T={cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],cartTotalQuantity:0,cartTotalAmount:0},V=(Object(z.c)("order/checkOutCart",function(){var e=Object(q.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.post("".concat(F,"/order"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),_.b.error(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),Object(z.d)({name:"cart",initialState:T,reducers:{addToCart:function(e,t){var n=e.cartItems.findIndex((function(e){return e._id===t.payload._id}));if(n>=0)e.cartItems[n]=Object(E.a)(Object(E.a)({},e.cartItems[n]),{},{cartQuantity:e.cartItems[n].cartQuantity+1}),_.b.info("quantit\xe9 ajout\xe9",{position:"bottom-left"});else{var r=Object(E.a)(Object(E.a)({},t.payload),{},{cartQuantity:1});e.cartItems.push(r),_.b.success("Produit ajout\xe9 au panier",{position:"bottom-left"})}localStorage.setItem("cartItems",JSON.stringify(e.cartItems))},decreaseCart:function(e,t){var n=e.cartItems.findIndex((function(e){return e._id===t.payload._id}));if(e.cartItems[n].cartQuantity>1)e.cartItems[n].cartQuantity-=1,_.b.info("Quantit\xe9 diminu\xe9",{position:"bottom-left"});else if(1===e.cartItems[n].cartQuantity){var r=e.cartItems.filter((function(e){return e._id!==t.payload._id}));e.cartItems=r,_.b.error("Produit enlev\xe9 du panier",{position:"bottom-left"})}localStorage.setItem("cartItems",JSON.stringify(e.cartItems))},removeFromCart:function(e,t){e.cartItems.map((function(n){if(n._id===t.payload._id){var r=e.cartItems.filter((function(e){return e._id!==n._id}));e.cartItems=r,_.b.error("Produit enlev\xe9 du panier",{position:"bottom-left"})}return localStorage.setItem("cartItems",JSON.stringify(e.cartItems)),e}))},getTotals:function(e,t){var n=e.cartItems.reduce((function(e,t){var n=t.price,r=t.cartQuantity,c=n*r;return e.total+=c,e.quantity+=r,e}),{total:0,quantity:0}),r=n.total,c=n.quantity;r=parseFloat(r.toFixed(2)),e.cartTotalQuantity=c,e.cartTotalAmount=r},clearCart:function(e,t){e.cartItems=[],localStorage.setItem("cartItems",JSON.stringify(e.cartItems)),_.b.error("Panier vid\xe9",{position:"bottom-left"})}}})),H=V.actions,M=H.addToCart,J=H.decreaseCart,B=H.removeFromCart,W=H.getTotals,G=H.clearCart,X=V.reducer,K=n(1),Y=function(){return Object(K.jsxs)("div",{className:"loading",children:[Object(K.jsx)("h3",{children:"Chargement ..."}),Object(K.jsx)("span",{class:"loader"})]})},Z=function(){var e=Object(P.e)((function(e){return e.products})),t=e.items,n=e.status,r=Object(P.e)((function(e){return e.cart})),c=Object(P.d)();Object(S.useEffect)((function(){c(W())}),[r,c]);return Object(K.jsx)("div",{className:"home-container",children:"success"===n?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h2",{children:"Nos produits"}),Object(K.jsx)("div",{className:"products",children:t&&(null===t||void 0===t?void 0:t.map((function(e){return Object(K.jsxs)("div",{className:"product",children:[Object(K.jsx)("h3",{children:e.name}),Object(K.jsx)("img",{src:e.image,alt:e.name}),Object(K.jsxs)("div",{className:"details",children:[Object(K.jsx)("span",{children:e.desc}),Object(K.jsxs)("span",{className:"price",children:["\u20ac",e.price]})]}),Object(K.jsx)("button",{onClick:function(){return function(e){c(M(e))}(e)},children:"Ajouter au panier"})]},e._id)})))})]}):"pending"===n?Object(K.jsx)(Y,{}):Object(K.jsx)("p",{children:"Une erreur est survenue..."})})},$=n(10),ee=n(18),te=n(42),ne={token:localStorage.getItem("token"),name:"",email:"",_id:"",isAdmin:"",registerStatus:"",registerError:"",loginStatus:"",loginError:"",userLoaded:!1},re=Object(z.c)("auth/registerUser",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Q.a.post("".concat(F,"/register"),{name:t.name,email:t.email,password:t.password});case 4:return c=e.sent,localStorage.setItem("token",c.data),e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0.response.data),e.abrupt("return",r(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ce=Object(z.c)("auth/loginUser",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Q.a.post("".concat(F,"/login"),{email:t.email,password:t.password});case 4:return c=e.sent,localStorage.setItem("token",c.data),e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),e.abrupt("return",r(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ae=Object(z.c)("auth/getUser",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,Q.a.get("".concat(F,"/user/").concat(t),R());case 4:return c=e.sent,localStorage.setItem("token",c.data),e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),e.abrupt("return",r(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ie=Object(z.d)({name:"auth",initialState:ne,reducers:{loadUser:function(e,t){var n=e.token;if(n){var r=Object(te.a)(n);return Object(E.a)(Object(E.a)({},e),{},{token:n,name:r.name,email:r.email,_id:r._id,isAdmin:r.isAdmin,userLoaded:!0})}return Object(E.a)(Object(E.a)({},e),{},{userLoaded:!0})},logoutUser:function(e,t){return localStorage.removeItem("token"),Object(E.a)(Object(E.a)({},e),{},{token:"",name:"",email:"",_id:"",isAdmin:"",registerStatus:"",registerError:"",loginStatus:"",loginError:""})}},extraReducers:function(e){e.addCase(re.pending,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{registerStatus:"pending"})})),e.addCase(re.fulfilled,(function(e,t){if(t.payload){var n=Object(te.a)(t.payload);return Object(E.a)(Object(E.a)({},e),{},{token:t.payload,name:n.name,email:n.email,_id:n._id,isAdmin:n.isAdmin,registerStatus:"success"})}return e})),e.addCase(re.rejected,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{registerStatus:"rejected",registerError:t.payload})})),e.addCase(ce.pending,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{loginStatus:"pending"})})),e.addCase(ce.fulfilled,(function(e,t){if(t.payload){var n=Object(te.a)(t.payload);return Object(E.a)(Object(E.a)({},e),{},{token:t.payload,name:n.name,email:n.email,_id:n._id,isAdmin:n.isAdmin,loginStatus:"success"})}return e})),e.addCase(ce.rejected,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{loginStatus:"rejected",loginError:t.payload})})),e.addCase(ae.pending,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{getUserStatus:"pending"})})),e.addCase(ae.fulfilled,(function(e,t){if(t.payload){var n=Object(te.a)(t.payload);return Object(E.a)(Object(E.a)({},e),{},{token:t.payload,name:n.name,email:n.email,_id:n._id,isAdmin:n.isAdmin,getUserStatus:"success"})}return e})),e.addCase(ae.rejected,(function(e,t){return Object(E.a)(Object(E.a)({},e),{},{getUserStatus:"rejected",getUserError:t.payload})}))}}),se=ie.actions,oe=se.loadUser,de=se.logoutUser,le=ie.reducer,ue=function(){var e=Object(P.d)(),t=Object(P.e)((function(e){return e.cart})).cartTotalQuantity,n=Object(P.e)((function(e){return e.auth}));return Object(K.jsxs)("nav",{className:"nav-bar",children:[Object(K.jsx)(I.b,{to:"/",children:Object(K.jsx)("h2",{children:"E-Commerce"})}),Object(K.jsx)(I.b,{to:"/cart",children:Object(K.jsxs)("div",{className:"nav-bag",children:[Object(K.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",className:"bi bi-handbag-fill",viewBox:"0 0 16 16",children:Object(K.jsx)("path",{d:"M8 1a2 2 0 0 0-2 2v2H5V3a3 3 0 1 1 6 0v2h-1V3a2 2 0 0 0-2-2zM5 5H3.36a1.5 1.5 0 0 0-1.483 1.277L.85 13.13A2.5 2.5 0 0 0 3.322 16h9.355a2.5 2.5 0 0 0 2.473-2.87l-1.028-6.853A1.5 1.5 0 0 0 12.64 5H11v1.5a.5.5 0 0 1-1 0V5H6v1.5a.5.5 0 0 1-1 0V5z"})}),"Panier",Object(K.jsx)("span",{className:"bag-quantity",children:Object(K.jsx)("span",{children:t})})]})}),n._id?Object(K.jsxs)(be,{children:[n.isAdmin?Object(K.jsx)("div",{children:Object(K.jsx)(I.b,{to:"/admin/products",children:"Admin"})}):null,Object(K.jsx)("div",{className:"deconnexion",onClick:function(){e(de(null)),_.b.warning("D\xe9connect\xe9",{position:"bottom-left"})},children:"D\xe9connexion"})]}):Object(K.jsxs)(je,{children:[Object(K.jsx)(I.b,{to:"/login",children:"Connexion"}),Object(K.jsx)(I.b,{to:"register",children:"Cr\xe9er un compte"})]})]})},je=ee.a.div(r||(r=Object($.a)(["\n  a {\n    &:last-child {\n      margin-left: 2rem;\n    }\n  }\n"]))),be=ee.a.div(c||(c=Object($.a)(["\n  color: white;\n  display: flex;\n\n  div {\n    cursor: pointer;\n\n    &:last-child {\n      margin-left: 2rem;\n    }\n  }\n"]))),pe=function(){return Object(K.jsxs)("div",{className:"not-found",children:[Object(K.jsx)("h2",{children:"404"}),Object(K.jsx)("p",{children:"Page not found"})]})},he=function(e){var t=e.cartItems,n=(e.subtotal,Object(P.e)((function(e){return e.auth})));return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)("button",{onClick:function(){Q.a.post("".concat(F,"/stripe/create-checkout-session"),{cartItems:t,userId:n._id}).then((function(e){e.data.url&&(window.location.href=e.data.url)})).catch((function(e){return console.log(e.message)}))},children:"Payer"})})},Oe=function(){var e=Object(P.e)((function(e){return e.cart})),t=Object(P.e)((function(e){return e.auth})),n=Object(P.d)(),r=Object(A.g)();Object(S.useEffect)((function(){n(W()),console.log("cart: ",e)}),[e,n]);return Object(K.jsxs)("div",{className:"cart-container",children:[Object(K.jsx)("h2",{children:"PANIER"}),0===e.cartItems.length?Object(K.jsxs)("div",{className:"cart-empty",children:[Object(K.jsx)("p",{children:"Panier vide pour le moment"}),Object(K.jsx)("div",{className:"start-shopping",children:Object(K.jsxs)(I.b,{to:"/",children:[Object(K.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(K.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})}),Object(K.jsx)("span",{children:"Commencer votre shopping"})]})})]}):Object(K.jsxs)("div",{children:[Object(K.jsxs)("div",{className:"titles",children:[Object(K.jsx)("h3",{className:"product-title",children:"Produit"}),Object(K.jsx)("h3",{className:"price",children:"Prix"}),Object(K.jsx)("h3",{className:"quantity",children:"Quantit\xe9"}),Object(K.jsx)("h3",{className:"total",children:"Total"})]}),Object(K.jsx)("div",{className:"cart-items",children:e.cartItems&&e.cartItems.map((function(e){return Object(K.jsxs)("div",{className:"cart-item",children:[Object(K.jsxs)("div",{className:"cart-product",children:[Object(K.jsx)("img",{src:e.image,alt:e.name}),Object(K.jsxs)("div",{children:[Object(K.jsx)("h3",{children:e.name}),Object(K.jsx)("p",{children:e.desc}),Object(K.jsx)("button",{onClick:function(){n(B(e))},children:"Supprimer"})]})]}),Object(K.jsxs)("div",{className:"cart-product-price",children:["\u20ac",e.price]}),Object(K.jsxs)("div",{className:"cart-product-quantity",children:[Object(K.jsx)("button",{onClick:function(){n(J(e))},children:"-"}),Object(K.jsx)("div",{className:"count",children:e.cartQuantity}),Object(K.jsx)("button",{onClick:function(){n(M(e))},children:"+"})]}),Object(K.jsxs)("div",{className:"cart-product-total-price",children:["\u20ac",e.price*e.cartQuantity]})]},e._id)}))}),Object(K.jsxs)("div",{className:"cart-summary",children:[Object(K.jsx)("button",{className:"clear-btn",onClick:function(){n(G())},children:"Vider le panier"}),Object(K.jsxs)("div",{className:"cart-checkout",children:[Object(K.jsxs)("div",{className:"subtotal",children:[Object(K.jsx)("span",{children:"Sous-total"}),Object(K.jsxs)("span",{className:"amount",children:["\u20ac",e.cartTotalAmount]})]}),Object(K.jsx)("p",{children:"Le paiement est factice et rien ne sera r\xe9ellement command\xe9"}),t._id?Object(K.jsx)(he,{cartItems:e.cartItems,subtotal:e.cartTotalAmount}):Object(K.jsx)("button",{className:"cart-login",onClick:function(){return r("/login")},children:"Se connecter pour payer"}),Object(K.jsx)("div",{className:"continue-shopping",children:Object(K.jsxs)(I.b,{to:"/",children:[Object(K.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(K.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})}),Object(K.jsx)("span",{children:"Continuer votre Shopping"})]})})]})]})]})]})},me=n(51),xe=function(){return Object(P.e)((function(e){return e.auth})).isAdmin?Object(K.jsxs)(fe,{children:[Object(K.jsxs)(ge,{children:[Object(K.jsx)("h3",{children:"Dashboard"}),Object(K.jsxs)(I.c,{className:function(e){return e.isActive?"link-active":"link-inactive"},to:"/admin/products",children:[Object(K.jsx)(me.b,{})," Produits"]}),Object(K.jsxs)(I.c,{className:function(e){return e.isActive?"link-active":"link-inactive"},to:"/admin/orders",children:[Object(K.jsx)(me.a,{})," Commandes"]}),Object(K.jsxs)(I.c,{className:function(e){return e.isActive?"link-active":"link-inactive"},to:"/admin/users",children:[Object(K.jsx)(me.c,{})," Utilisateurs"]})]}),Object(K.jsx)(ve,{children:Object(K.jsx)(A.a,{})})]}):Object(K.jsx)("p",{children:"Acc\xe8s non autoris\xe9. Vous n'\xeates pas Admin!"})},fe=ee.a.div(a||(a=Object($.a)(["\n  display: flex;\n  height: 100vh;\n"]))),ge=ee.a.div(i||(i=Object($.a)(["\n  border-right: 1px solid gray;\n  height: calc(100vh - 70px);\n  position: fixed;\n  overflow-y: auto;\n  width: 200px;\n  display: flex;\n  flex-direction: column;\n  padding: 2rem;\n  h3 {\n    margin: 0 0 1rem 0;\n    padding: 0;\n    text-transform: uppercase;\n    font-size: 17px;\n  }\n  a {\n    text-decoration: none;\n    margin-bottom: 1rem;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    font-weight: 700;\n  }\n  svg {\n    margin-right: 0.5rem;\n    font-size: 18px;\n  }\n"]))),ve=ee.a.div(s||(s=Object($.a)(["\n  margin-left: 200px;\n  padding: 2rem 3rem;\n  width: 100%;\n"]))),we=ee.a.div(o||(o=Object($.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),ye=ee.a.button(d||(d=Object($.a)(["\n  padding: 9px 12px;\n  border-radius: 5px;\n  font-weight: 400;\n  letter-spacing: 1.15px;\n  background-color: #4b70e2;\n  color: #f9f9f9;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  margin: 0.5rem 0;\n"]))),Se=function(){var e=Object(A.g)();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(we,{children:[Object(K.jsx)("h2",{children:"Produits"}),Object(K.jsx)(ye,{onClick:function(){return e("/admin/products/create-product")},children:"Ajouter"})]}),Object(K.jsx)(A.a,{})]})},Ne=function(){return Object(K.jsx)("h2",{children:"Summary"})},ke=n(6),Ce=Object(z.c)("products/productsFetch",Object(q.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("".concat(F,"/products"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),Ie=Object(z.c)("products/productsCreate",function(){var e=Object(q.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.post("".concat(F,"/products"),t,R());case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),_.b.error(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),Ae=Object(z.c)("products/productDelete",function(){var e=Object(q.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("".concat(F,"/products/").concat(t)),e.next=4,Q.a.delete("".concat(F,"/products/").concat(t),R());case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),_.b.error(null===(r=e.t0.response)||void 0===r?void 0:r.data);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),_e=Object(z.d)({name:"products",initialState:{items:[],status:null,createStatus:null,deleteStatus:null},reducers:{},extraReducers:(l={},Object(y.a)(l,Ce.pending,(function(e,t){e.status="pending"})),Object(y.a)(l,Ce.fulfilled,(function(e,t){e.items=t.payload,e.status="success"})),Object(y.a)(l,Ce.rejected,(function(e,t){e.status="rejected"})),Object(y.a)(l,Ie.pending,(function(e,t){e.createStatus="pending"})),Object(y.a)(l,Ie.fulfilled,(function(e,t){e.items.push(t.payload),e.createStatus="success",_.b.success("Produit ajout\xe9")})),Object(y.a)(l,Ie.rejected,(function(e,t){e.createStatus="rejected"})),Object(y.a)(l,Ae.pending,(function(e,t){e.deleteStatus="pending"})),Object(y.a)(l,Ae.fulfilled,(function(e,t){var n=e.items.filter((function(e){return e._id!==t.payload._id}));e.items=n,e.deleteStatus="success",_.b.error("Produit supprim\xe9")})),Object(y.a)(l,Ae.rejected,(function(e,t){e.deleteStatus="rejected"})),l)}).reducer,Pe=function(){var e=Object(P.d)(),t=Object(A.g)(),n=Object(S.useState)(""),r=Object(ke.a)(n,2),c=r[0],a=r[1],i=Object(S.useState)(""),s=Object(ke.a)(i,2),o=s[0],d=s[1],l=Object(S.useState)(""),u=Object(ke.a)(l,2),j=u[0],b=u[1],p=Object(S.useState)(""),h=Object(ke.a)(p,2),O=h[0],m=h[1],x=Object(S.useState)(""),f=Object(ke.a)(x,2),g=f[0],v=f[1];console.log(c);var w=function(e){var t=new FileReader;e?(t.readAsDataURL(e),t.onloadend=function(){a(t.result)}):a("")};return Object(K.jsxs)(Ue,{children:[Object(K.jsxs)(Ee,{onSubmit:function(n){n.preventDefault(),e(Ie({name:o,brand:j,price:O,desc:g,image:c})),t("/admin/products")},children:[Object(K.jsx)("h3",{children:"Ajouter un nouveau produit"}),Object(K.jsx)("input",{type:"file",accept:"image/",onChange:function(e){var t=e.target.files[0];w(t)},required:!0}),Object(K.jsxs)("select",{onChange:function(e){return b(e.target.value)},required:!0,children:[Object(K.jsx)("option",{value:"",children:"Choisir la marque"}),Object(K.jsx)("option",{value:"iphone",children:"Iphone"}),Object(K.jsx)("option",{value:"samsung",children:"Samsung"}),Object(K.jsx)("option",{value:"xiaomi",children:"Xiaomi"}),Object(K.jsx)("option",{value:"other",children:"Autre marque"})]}),Object(K.jsx)("input",{type:"text",required:!0,placeholder:"nom",onChange:function(e){return d(e.target.value)}}),Object(K.jsx)("input",{type:"text",required:!0,placeholder:"Prix",onChange:function(e){return m(e.target.value)}}),Object(K.jsx)("input",{type:"text",required:!0,placeholder:"Description",onChange:function(e){return v(e.target.value)}}),Object(K.jsx)(ye,{type:"submit",children:"Envoyer"})]}),Object(K.jsx)(De,{children:c?Object(K.jsx)(K.Fragment,{children:Object(K.jsx)("img",{src:c,alt:"le produit"})}):Object(K.jsx)("p",{children:"La preview de l'image upload\xe9e"})})]})},Ee=ee.a.form(u||(u=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 300px;\n  margin-top: 2rem;\n  select,\n  input {\n    padding: 7px;\n    min-height: 30px;\n    outline: none;\n    border-radius: 5px;\n    border: 1px solid rgb(182, 182, 182);\n    margin: 0.3rem 0;\n    &:focus {\n      border: 2px solid rgb(0, 208, 255);\n    }\n  }\n  select {\n    color: rgb(95, 95, 95);\n  }\n"]))),Ue=ee.a.div(j||(j=Object($.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),De=ee.a.div(b||(b=Object($.a)(["\n  margin: 2rem 0 2rem 2rem;\n  padding: 2rem;\n  border: 1px solid rgb(183, 183, 183);\n  max-width: 300px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  color: rgb(78, 78, 78);\n  img {\n    max-width: 100%;\n  }\n"]))),qe=(n(130),ee.a.form(p||(p=Object($.a)(["\n  max-width: 350px;\n  width: 100%;\n  margin: 2rem auto;\n\n  h2 {\n    margin-bottom: 1rem;\n  }\n\n  button,\n  input {\n    height: 35px;\n    width: 100%;\n    padding: 7px;\n    outline: none;\n    border-radius: 5px;\n    border: 1px solid rgb(220, 220, 220);\n    margin-bottom: 1rem;\n\n    &:focus {\n      border: 1px solid rgb(0, 208, 255);\n    }\n  }\n\n  button {\n    cursor: pointer;\n\n    &:focus {\n      border: none;\n    }\n  }\n\n  p {\n    font-size: 14px;\n    color: red;\n  }\n"])))),ze=function(){var e=Object(P.d)(),t=Object(A.g)(),n=Object(P.e)((function(e){return e.auth})),r=Object(S.useState)({name:"",email:"",password:""}),c=Object(ke.a)(r,2),a=c[0],i=c[1];Object(S.useEffect)((function(){n._id&&t("/cart")}),[n._id,t]);return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(qe,{onSubmit:function(t){t.preventDefault(),console.log(a),e(re(a))},children:[Object(K.jsx)("h2",{children:"Register"}),Object(K.jsx)("input",{type:"text",placeholder:"name",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{name:e.target.value}))}}),Object(K.jsx)("input",{type:"email",placeholder:"email",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{email:e.target.value}))}}),Object(K.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{password:e.target.value}))}}),Object(K.jsx)("button",{children:"pending"===n.rigisterStatus?"Submitting...":"Register"}),"rejected"===n.registerStatus?Object(K.jsx)("p",{children:n.registerError}):null]})})},Le=function(){var e=Object(A.g)(),t=Object(P.d)(),n=Object(P.e)((function(e){return e.auth})),r=Object(S.useState)({email:"",password:""}),c=Object(ke.a)(r,2),a=c[0],i=c[1];Object(S.useEffect)((function(){n._id&&e("/cart")}),[n._id,e]);return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(qe,{onSubmit:function(e){e.preventDefault(),console.log(a),t(ce(a))},children:[Object(K.jsx)("h2",{children:"Login"}),Object(K.jsx)("input",{type:"email",placeholder:"email",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{email:e.target.value}))}}),Object(K.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return i(Object(E.a)(Object(E.a)({},a),{},{password:e.target.value}))}}),Object(K.jsx)("button",{children:"pending"===n.loginStatus?"Submitting...":"Login"}),"rejected"===n.loginStatus?Object(K.jsx)("p",{children:n.loginError}):null]})})},Qe=function(){return Object(K.jsxs)("div",{className:"paiement-reussi",children:[Object(K.jsx)("h2",{children:"PAIEMENT REUSSI"}),Object(K.jsx)("div",{className:"retour-accueil",children:Object(K.jsxs)(I.b,{to:"/",children:[Object(K.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(K.jsx)("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})}),Object(K.jsx)("span",{children:"Retour \xe0 l'accueil"})]})})]})},Fe=n(177),Re=Object(z.c)("orders/ordersFetch",Object(q.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("".concat(F,"/order"),R());case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),Te=Object(z.c)("orders/ordersEdit",function(){var e=Object(q.a)(D.a.mark((function e(t,n){var r,c,a,i,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,c=r(),a=c.orders.list.filter((function(e){return e._id===t.id})),i=Object(E.a)(Object(E.a)({},a[0]),{},{delivery_status:t.delivery_status}),e.prev=4,e.next=7,Q.a.put("".concat(F,"/order/").concat(t.id),i,R());case 7:return s=e.sent,e.abrupt("return",s.data);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}()),Ve=Object(z.d)({name:"orders",initialState:{list:[],status:null},reducers:{},extraReducers:(h={},Object(y.a)(h,Re.pending,(function(e,t){e.status="pending"})),Object(y.a)(h,Re.fulfilled,(function(e,t){e.list=t.payload,e.status="success"})),Object(y.a)(h,Re.rejected,(function(e,t){e.status="rejected"})),Object(y.a)(h,Te.pending,(function(e,t){e.status="pending"})),Object(y.a)(h,Te.fulfilled,(function(e,t){var n=e.list.map((function(e){return e._id===t.payload._id?t.payload:e}));e.list=n,e.status="success"})),Object(y.a)(h,Te.rejected,(function(e,t){e.status="rejected"})),h)}).reducer,He=n(81),Me=n.n(He);function Je(){var e=Object(P.e)((function(e){return e.orders})).list,t=Object(P.d)(),n=Object(A.g)();console.log("list:",e),S.useEffect((function(){t(Re())}),[t]);var r=e&&e.map((function(e){var t;return{id:e._id,cName:e.shipping.name,amount:null===(t=e.total/100)||void 0===t?void 0:t.toLocaleString(),deliveryStatus:e.delivery_status,date:Me()(e.createdAt).fromNow()}})),c=[{field:"id",headerName:"ID",width:220},{field:"cName",headerName:"Utilisateur",width:120},{field:"amount",headerName:"Montant(\u20ac)",width:100},{field:"deliveryStatus",headerName:"Status",width:100,renderCell:function(e){return Object(K.jsx)("div",{children:"pending"===e.row.deliveryStatus?Object(K.jsx)(Ke,{children:"A Traiter"}):"dispatched"===e.row.deliveryStatus?Object(K.jsx)(Ye,{children:"Accept\xe9"}):"delivered"===e.row.deliveryStatus?Object(K.jsx)(Ze,{children:"D\xe9livr\xe9"}):"error"})}},{field:"date",headerName:"Date",width:120},{field:"actions",headerName:"Actions",sortable:!1,width:220,renderCell:function(e){return Object(K.jsxs)($e,{children:[Object(K.jsx)(tt,{onClick:function(){return a(e.row.id)},children:"Accepter"}),Object(K.jsx)(nt,{onClick:function(){return i(e.row.id)},children:"D\xe9livrer"}),Object(K.jsx)(et,{onClick:function(){return n("/order/".concat(e.row.id))},children:"Voir"})]})}}],a=function(e){t(Te({id:e,delivery_status:"dispatched"}))},i=function(e){t(Te({id:e,delivery_status:"delivered"}))};return Object(K.jsx)("div",{style:{height:400,width:"100%"},children:Object(K.jsx)(Fe.a,{rows:r,columns:c,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0})})}var Be,We,Ge,Xe,Ke=ee.a.div(O||(O=Object($.a)(["\n  color: rgb(253, 181, 40);\n  background: rgb(253, 181, 40, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),Ye=ee.a.div(m||(m=Object($.a)(["\n  color: rgb(38, 198, 249);\n  background: rgb(38, 198, 249, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),Ze=ee.a.div(x||(x=Object($.a)(["\n  color: rgb(102, 108, 255);\n  background: rgb(102, 108, 255, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),$e=ee.a.div(f||(f=Object($.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  button {\n    border: none;\n    outline: none;\n    padding: 3px 5px;\n    color: white;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n"]))),et=ee.a.button(g||(g=Object($.a)(["\n  background-color: rgb(114, 225, 40);\n"]))),tt=ee.a.button(v||(v=Object($.a)(["\n  background-color: rgb(38, 198, 249);\n"]))),nt=ee.a.button(w||(w=Object($.a)(["\n  background-color: rgb(102, 108, 255);\n"]))),rt=function(){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h2",{children:"Commandes"}),Object(K.jsx)(Je,{})]})};function ct(){var e=Object(P.e)((function(e){return e.products})).items,t=Object(P.d)(),n=e&&e.map((function(e){return{id:e._id,imageUrl:e.image,pName:e.name,pDesc:e.desc,price:e.price.toLocaleString()}})),r=[{field:"id",headerName:"ID",width:220},{field:"imageUrl",headerName:"image",width:80,renderCell:function(e){return Object(K.jsx)(jt,{children:Object(K.jsx)("img",{src:e.row.imageUrl,alt:""})})}},{field:"pName",headerName:"Nom",width:130},{field:"pDesc",headerName:"Description",width:130},{field:"price",headerName:"Prix",width:80},{field:"actions",headerName:"Actions",sortable:!1,width:170,renderCell:function(e){return Object(K.jsx)(bt,{children:Object(K.jsx)(pt,{onClick:function(){return c(e.row.id)},children:"Supprimer"})})}}],c=function(e){t(Ae(e)),console.log("suppression...")};return Object(K.jsx)("div",{style:{height:400,width:"100%"},children:Object(K.jsx)(Fe.a,{rows:n,columns:r,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0})})}var at,it,st,ot,dt,lt,ut,jt=ee.a.div(Be||(Be=Object($.a)(["\n  img {\n    height: 40px;\n  }\n"]))),bt=ee.a.div(We||(We=Object($.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  button {\n    border: none;\n    outline: none;\n    padding: 3px 5px;\n    color: white;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n"]))),pt=ee.a.button(Ge||(Ge=Object($.a)(["\n  background-color: rgb(255, 77, 73);\n"]))),ht=(ee.a.button(Xe||(Xe=Object($.a)(["\n  background-color: rgb(114, 225, 40);\n"]))),function(){return Object(K.jsx)("h2",{children:"Utilisateurs"})}),Ot=function(){var e,t,n,r,c=Object(A.h)(),a=Object(S.useState)({}),i=Object(ke.a)(a,2),s=i[0],o=i[1],d=Object(S.useState)(!1),l=Object(ke.a)(d,2),u=l[0],j=l[1];return Object(S.useEffect)((function(){var e=function(){var e=Object(q.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,Q.a.get("".concat(F,"/order/findOne/").concat(c.id),R());case 4:t=e.sent,o(t.data),j(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[c.id]),Object(K.jsx)(mt,{children:u?Object(K.jsx)(Y,{}):Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(xt,{children:[Object(K.jsx)("h2",{children:"Details de commande"}),Object(K.jsxs)("p",{children:["Status de la livraison:"," ","pending"===s.delivery_status?Object(K.jsx)(vt,{children:"A traiter"}):"dispatched"===s.delivery_status?Object(K.jsx)(wt,{children:"En cours"}):"delivered"===s.delivery_status?Object(K.jsx)(yt,{children:"D\xe9livr\xe9"}):"erreur"]}),Object(K.jsx)("h3",{children:"Produits command\xe9s"}),Object(K.jsx)(ft,{children:null===(e=s.products)||void 0===e?void 0:e.map((function(e,t){return Object(K.jsxs)(gt,{children:[Object(K.jsx)("span",{children:e.description}),Object(K.jsx)("span",{children:e.quantity}),Object(K.jsx)("span",{children:"\u20ac"+(e.amount_total/100).toLocaleString()})]},t)}))}),Object(K.jsxs)("div",{children:[Object(K.jsx)("h3",{children:"Prix total"}),Object(K.jsx)("p",{children:"\u20ac"+(s.total/100).toLocaleString()})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("h3",{children:"Details de livraison"}),Object(K.jsxs)("p",{children:["Client: ",null===(t=s.shipping)||void 0===t?void 0:t.name]}),Object(K.jsxs)("p",{children:["Ville: ",null===(n=s.shipping)||void 0===n?void 0:n.address.city]}),Object(K.jsxs)("p",{children:["Email: ",null===(r=s.shipping)||void 0===r?void 0:r.email]})]})]})})})},mt=ee.a.div(at||(at=Object($.a)(["\n  margin: 3rem;\n  display: flex;\n  justify-content: center;\n  h3 {\n    margin: 1.5rem 0 0.5rem 0;\n  }\n"]))),xt=ee.a.div(it||(it=Object($.a)(["\n  max-width: 500px;\n  width: 100%;\n  height: auto;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  border-radius: 5px;\n  padding: 2rem;\n"]))),ft=ee.a.div(st||(st=Object($.a)(["\n  span {\n    margin-right: 1.5rem;\n    &:first-child {\n      font-weight: bold;\n    }\n  }\n"]))),gt=ee.a.li(ot||(ot=Object($.a)(["\n  margin-left: 0.5rem;\n  margin-bottom: 0.5rem;\n"]))),vt=ee.a.span(dt||(dt=Object($.a)(["\n  color: rgb(253, 181, 40);\n  background: rgb(253, 181, 40, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),wt=ee.a.span(lt||(lt=Object($.a)(["\n  color: rgb(38, 198, 249);\n  background: rgb(38, 198, 249, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"]))),yt=ee.a.span(ut||(ut=Object($.a)(["\n  color: rgb(102, 108, 255);\n  background: rgb(102, 108, 255, 0.12);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font-size: 14px;\n"])));var St=function(){var e=Object(P.d)();return Object(S.useEffect)((function(){e(oe(null))}),[e]),Object(K.jsx)("div",{className:"App",children:Object(K.jsxs)(I.a,{children:[Object(K.jsx)(_.a,{}),Object(K.jsx)(ue,{}),Object(K.jsx)("div",{className:"content-container",children:Object(K.jsxs)(A.d,{children:[Object(K.jsx)(A.b,{path:"/",element:Object(K.jsx)(Z,{})}),Object(K.jsx)(A.b,{path:"/cart",element:Object(K.jsx)(Oe,{})}),Object(K.jsx)(A.b,{path:"/checkout-success",element:Object(K.jsx)(Qe,{})}),Object(K.jsx)(A.b,{path:"/register",element:Object(K.jsx)(ze,{})}),Object(K.jsx)(A.b,{path:"/login",element:Object(K.jsx)(Le,{})}),Object(K.jsx)(A.b,{path:"/order/:id",element:Object(K.jsx)(Ot,{})}),Object(K.jsxs)(A.b,{path:"/admin",element:Object(K.jsx)(xe,{}),children:[Object(K.jsxs)(A.b,{path:"products",element:Object(K.jsx)(Se,{}),children:[Object(K.jsx)(A.b,{index:!0,element:Object(K.jsx)(ct,{})}),Object(K.jsx)(A.b,{path:"create-product",element:Object(K.jsx)(Pe,{})})]}),Object(K.jsx)(A.b,{path:"summary",element:Object(K.jsx)(Ne,{})}),Object(K.jsx)(A.b,{path:"orders",element:Object(K.jsx)(rt,{})}),Object(K.jsx)(A.b,{path:"users",element:Object(K.jsx)(ht,{})})]}),Object(K.jsx)(A.b,{path:"*",element:Object(K.jsx)(pe,{})})]})})]})})},Nt=n(82),kt=n(28),Ct=Object(Nt.a)({reducerPath:"productsApi",baseQuery:Object(kt.d)({baseUrl:"https://shop-api-4i7l.onrender.com/"}),endpoints:function(e){return{getAllProducts:e.query({query:function(){return"products"}})}}}),It=(Ct.useGetAllProductsQuery,Object(z.a)({reducer:Object(y.a)({products:_e,orders:Ve,cart:X,auth:le},Ct.reducerPath,Ct.reducer),middleware:function(e){return e().concat(Ct.middleware)}}));It.dispatch(Ce()),It.dispatch(W()),It.dispatch(oe(null)),C.a.render(Object(K.jsx)(N.a.StrictMode,{children:Object(K.jsx)(P.a,{store:It,children:Object(K.jsx)(St,{})})}),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.6c19c8dd.chunk.js.map